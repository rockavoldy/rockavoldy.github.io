<!DOCTYPE html>
<html lang="id"><head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description"
        content="Membuat Systemd Service Untuk Aplikasi Go ">

    <link rel="canonical" href="https://akhmad.id/membuat-systemd-service-untuk-aplikasi-go/" />

    
    
    
    <title>Membuat Systemd Service Untuk Aplikasi Go | Akhmad</title>

    <link rel="stylesheet" type="text/css" href="https://akhmad.id/assets/css/tailwind.css">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Fira+Sans:400,700">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Fira+Code:400,700">
</head>
<body class="antialiased font-sans bg-white text-slate-900 dark:bg-slate-800 dark:text-white"><nav id="nav__container" class="mx-auto w-full px-4 md:px-6 py-2 md:py-3 flex flex-wrap items-center justify-between drop-shadow-xl bg-white dark:bg-slate-800">
    
    <div class="text-slate-800 dark:text-white mr-6">
        <div class="flex flex-col">
            <a href="https://akhmad.id/" class="font-semibold text-xl hover:text-slate-700 dark:hover:text-slate-300">Akhmad</a>
            <span class="text-xs sm:text-sm">Stories, Build logs, Ideas</span>
        </div>
    </div>

    <div class="flex flex-row">
        <div class="mx-2 hidden lg:block">
            <a href="https://github.com/rockavoldy" target="_blank" rel="noreferrer">
                <svg class="text-slate-800 dark:text-white hover:text-slate-700 dark:hover:text-slate-300 fill-current h-6 w-6" viewBox="0 0 24 24">
                    <path
                        d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z" />
                </svg>
            </a>
        </div>
        <div class="mx-2 hidden lg:block">
            <a href="https://twitter.com/rockavoldy"  target="_blank" rel="noreferrer">
                <svg class="text-slate-800 dark:text-white hover:text-slate-700 dark:hover:text-slate-300 fill-current h-6 w-6" viewBox="0 0 24 24">
                    <path
                        d="M22.46,6C21.69,6.35 20.86,6.58 20,6.69C20.88,6.16 21.56,5.32 21.88,4.31C21.05,4.81 20.13,5.16 19.16,5.36C18.37,4.5 17.26,4 16,4C13.65,4 11.73,5.92 11.73,8.29C11.73,8.63 11.77,8.96 11.84,9.27C8.28,9.09 5.11,7.38 3,4.79C2.63,5.42 2.42,6.16 2.42,6.94C2.42,8.43 3.17,9.75 4.33,10.5C3.62,10.5 2.96,10.3 2.38,10C2.38,10 2.38,10 2.38,10.03C2.38,12.11 3.86,13.85 5.82,14.24C5.46,14.34 5.08,14.39 4.69,14.39C4.42,14.39 4.15,14.36 3.89,14.31C4.43,16 6,17.26 7.89,17.29C6.43,18.45 4.58,19.13 2.56,19.13C2.22,19.13 1.88,19.11 1.54,19.07C3.44,20.29 5.7,21 8.12,21C16,21 20.33,14.46 20.33,8.79C20.33,8.6 20.33,8.42 20.32,8.23C21.16,7.63 21.88,6.87 22.46,6Z" />
                </svg>
            </a>
        </div>
        <div class="mx-1 lg:ml-8">
            <button id="dark_mode_toggle">
                <svg class="text-slate-800 dark:text-white hover:text-slate-700 dark:hover:text-slate-300 fill-current h-6 w-6"
                    id="btn_dark" viewBox="0 0 24 24">
                    <path
                        d="M14,2c1.82,0,3.53,0.5,5,1.35C16.01,5.08,14,8.3,14,12s2.01,6.92,5,8.65C17.53,21.5,15.82,22,14,22C8.48,22,4,17.52,4,12 S8.48,2,14,2z" />
                </svg>
                <svg class="text-slate-800 dark:text-white hover:text-slate-700 dark:hover:text-slate-300 fill-current h-6 w-6 hidden"
                    id="btn_light" viewBox="0 0 24 24">
                    <path
                        d="M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0 c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2 c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1 C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06 c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41 l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41 c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36 c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z" />
                </svg>
            </button>
        </div>
    </div>
</nav>
<div id="content">
<main>
    <header>
    
    <div class="mt-6 md:mt-14 lg:mt-20">
        <div class="max-w-xl md:max-w-3xl xl:max-w-4xl mx-auto text-center px-6">
            <h1 class="text-3xl sm:text-5xl leading-tight font-sans font-bold mb-2 text-slate-800 dark:text-slate-100">Membuat Systemd Service Untuk Aplikasi Go</h1>
            <p class="text-slate-700 dark:text-slate-200">
                

<time datetime="2022-03-30" class="text-slate-900 dark:text-slate-100 text-xs mb-2 uppercase">Wednesday, 30 March 2022</time>

            </p>
        </div>
    </div>
    
</header>

    <article class="max-w-xl md:max-w-2xl xl:max-w-3xl mx-auto px-6 sm:px-12 pt-12">
        <div class="markdown">
            <ol>
<li>
<p>Buat sebuah file dengan ekstensi <code>.service</code> di dalam <code>/lib/systemd/system/</code> directory. Dalam kasus ini, saya buat dengan  nama <code>pajak.service</code></p>
</li>
<li>
<p>Copy struktur &ldquo;sederhana&rdquo; dibawah ke file <code>pajak.service</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#ff79c6">[</span>Unit<span style="color:#ff79c6">]</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">Description</span><span style="color:#ff79c6">=</span>kursPajak
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">[</span>Service<span style="color:#ff79c6">]</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">Group</span><span style="color:#ff79c6">=</span>akhmad
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">Type</span><span style="color:#ff79c6">=</span>simple
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">Restart</span><span style="color:#ff79c6">=</span>always
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">RestartSec</span><span style="color:#ff79c6">=</span>5s
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">WorkingDirectory</span><span style="color:#ff79c6">=</span>/home/akhmad/pajak/
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">ExecStart</span><span style="color:#ff79c6">=</span>env <span style="color:#8be9fd;font-style:italic">HTTP_PORT</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;:8080&#34;</span> /home/akhmad/pajak/pajak
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">PermissionsStartOnly</span><span style="color:#ff79c6">=</span><span style="color:#8be9fd;font-style:italic">true</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">StandardOutput</span><span style="color:#ff79c6">=</span>syslog
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">StandardError</span><span style="color:#ff79c6">=</span>syslog
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">SyslogIdentifier</span><span style="color:#ff79c6">=</span>sleepservice
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">[</span>Install<span style="color:#ff79c6">]</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">WantedBy</span><span style="color:#ff79c6">=</span>multi-user.target
</span></span></code></pre></div><p>Dari contoh konfigurasi service di atas, aplikasi Go saya berada di dalam directory <code>/home/akhmad/pajak/</code> dengan nama file executable adalah <code>pajak</code>.</p>
<p>Yang harus diperhatikan dari config diatas adalah <code>ExecStart</code> dan <code>WorkingDirectory</code></p>
<ul>
<li><code>ExecStart</code> ini diarahkan ke file executable-nya, seperti ketika menjalankan aplikasi-nya secara langsung. Terdapat <code>env HTTP_PORT=&quot;:8080&quot;</code> yang akan di-pass ke aplikasinya.</li>
<li><code>WorkingDirectory</code> ini akan menjadi relative path dari aplikasi. Dan tidak bergantung terhadap dimana aplikasi go ini berada, jadi ketika <code>pajak</code> ini berapa di <code>/usr/bin</code>, dan ExecStart di-set menjadi <code>env HTTP_PORT=&quot;:8080&quot; /usr/bin/pajak</code>, ketika <code>WorkingDirectory</code> ini di-set, dia akan tetap relative terhadap directory <code>/home/akhmad/pajak/</code>, dan bukan terhadap directory <code>/usr/bin/</code>.</li>
</ul>
<p>Selain itu, output dan error dari service ini hanya akan disimpan ke syslog, syslog ini bisa dicek dengan command</p>
<p><code>sudo systemctl status pajak.service</code></p>


<figure>
  <a href="../membuat-systemd-service-untuk-aplikasi-go/img/example-systemctl-status.png">
    <img loading="lazy" srcset='
      https://akhmad.id/membuat-systemd-service-untuk-aplikasi-go/img/example-systemctl-status_huc67df503376e8fe9b79834c3555393a3_60250_320x0_resize_box_3.png 320w,
      https://akhmad.id/membuat-systemd-service-untuk-aplikasi-go/img/example-systemctl-status_huc67df503376e8fe9b79834c3555393a3_60250_600x0_resize_box_3.png 600w,
      https://akhmad.id/membuat-systemd-service-untuk-aplikasi-go/img/example-systemctl-status.png 1200w'
      src='../membuat-systemd-service-untuk-aplikasi-go/img/example-systemctl-status_huc67df503376e8fe9b79834c3555393a3_60250_600x0_resize_box_3.png' alt="" />
  </a>
</figure>


<p>Untuk penjelasan lebih lanjut mengenai variable lain, bisa menuju ke <a href="https://www.freedesktop.org/software/systemd/man/systemd.service.html">man-page nya systemd disini</a>.</p>
</li>
<li>
<p>Setelah service selesai dibuat, service bisa langsung di start dengan command</p>
<p><code>sudo systemctl start &lt;nama_file&gt;</code></p>
<p>dan dalam kasus ini menjadi <code>sudo systemctl start pajak.service</code></p>
</li>
<li>
<p>Jika service tidak terlihat, reload terlebih dahulu service daemon dengan command</p>
<p><code>sudo systemctl daemon-reload</code></p>
</li>
<li>
<p>Agar service selalu dijalankan diawal OS boot, enable service dengan command</p>
<p><code>sudo systemctl enable pajak.service</code></p>
</li>
</ol>

        </div>
    </article>
</main>
<br><br>

        </div>
        <script>
            const svgDark = document.getElementById('btn_dark');
            const svgLight = document.getElementById('btn_light');
            const btnDarkMode = document.getElementById('dark_mode_toggle');

            
            if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
                svgDark.classList.add('hidden');
                svgLight.classList.remove('hidden');
                localStorage.theme = 'dark';
            } else {
                document.documentElement.classList.remove('dark');
                svgLight.classList.add('hidden');
                svgDark.classList.remove('hidden');
                localStorage.theme = 'light';
            }

            
            btnDarkMode.onclick = function() {
                if (localStorage.theme === 'dark') {
                    document.documentElement.classList.remove('dark');
                    svgLight.classList.add('hidden');
                    svgDark.classList.remove('hidden');
                    localStorage.theme = 'light';
                } else {
                    document.documentElement.classList.add('dark');
                    svgDark.classList.add('hidden');
                    svgLight.classList.remove('hidden');
                    localStorage.theme = 'dark';
                }
            }
        </script><footer class="text-slate-700 dark:text-slate-200 text-xs leading-normal flex flex-wrap justify-between mx-auto max-w-2xl px-4">
    <div class="w-full my-4">
        <p>
            Build with &hearts; in
            <strong>Bandung</strong>
        </p>
    </div>
    <div class="w-full sm:w-1/2">
        <nav>
            <ul class="flex sm:justify-end -mx-2">
                
            </ul>
        </nav>
    </div>
</footer>
</body>
</html>
