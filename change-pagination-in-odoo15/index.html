<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Change Pagination in Odoo15 "><link rel=canonical href=https://akhmad.id/change-pagination-in-odoo15/><title>Change Pagination in Odoo15 | Akhmad</title><link rel=stylesheet type=text/css href=https://akhmad.id/assets/css/tailwind.css><link rel=stylesheet type=text/css href="https://fonts.googleapis.com/css?family=Fira+Sans:400,700&display=swap"><link rel=stylesheet type=text/css href="https://fonts.googleapis.com/css?family=Fira+Code:400,700&display=swap"><link rel=icon type=image/ico href=https://akhmad.id/assets/favicon.ico><meta property="og:title" content="Change Pagination in Odoo15"><meta property="og:description" content="Change Pagination in Odoo15"><meta property="og:type" content="article"><meta property="og:url" content="https://akhmad.id/change-pagination-in-odoo15/"><meta property="article:section" content><meta property="article:published_time" content="2023-02-21T04:51:54+07:00"><meta property="article:modified_time" content="2023-02-21T04:51:54+07:00"><meta property="og:site_name" content="Akhmad Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Change Pagination in Odoo15"><meta name=twitter:description content="Change Pagination in Odoo15"></head><body class="antialiased font-sans bg-white text-slate-900 dark:bg-slate-800 dark:text-white"><div class="relative min-h-screen"><div class=pb-10><nav id=nav__container class="mx-auto w-full px-4 md:px-6 py-2 md:py-3 flex flex-wrap items-center justify-between drop-shadow-xl bg-white dark:bg-slate-800"><div class="text-slate-800 dark:text-white mr-6"><div class="flex flex-col"><a href=https://akhmad.id/ class="font-semibold text-xl hover:text-slate-700 dark:hover:text-slate-300">Akhmad</a>
<span class="text-xs sm:text-sm">Stories, Build logs, Ideas</span></div></div><div class="flex flex-row"><div class="mx-2 hidden lg:block"><a href=https://github.com/rockavoldy target=_blank rel=noreferrer aria-label="External link to github profile"><svg class="text-slate-800 dark:text-white hover:text-slate-700 dark:hover:text-slate-300 fill-current h-6 w-6" viewBox="0 0 24 24"><path d="M12 2A10 10 0 002 12c0 4.42 2.87 8.17 6.84 9.5C9.34 21.58 9.5 21.27 9.5 21 9.5 20.77 9.5 20.14 9.5 19.31 6.73 19.91 6.14 17.97 6.14 17.97c-.46-1.16-1.11-1.47-1.11-1.47C4.12 15.88 5.1 15.9 5.1 15.9 6.1 15.97 6.63 16.93 6.63 16.93 7.5 18.45 8.97 18 9.54 17.76 9.63 17.11 9.89 16.67 10.17 16.42c-2.22-.25-4.55-1.11-4.55-4.92.0-1.11.38-2 1.03-2.71C6.55 8.54 6.2 7.5 6.75 6.15c0 0 .84-.27 2.75 1.02C10.29 6.95 11.15 6.84 12 6.84s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02C17.8 7.5 17.45 8.54 17.35 8.79 18 9.5 18.38 10.39 18.38 11.5c0 3.82-2.34 4.66-4.57 4.91C14.17 16.72 14.5 17.33 14.5 18.26c0 1.34.0 2.42.0 2.74.0.27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0012 2z"/></svg></a></div><div class="mx-2 hidden lg:block"><a href=https://twitter.com/rockavoldy target=_blank rel=noreferrer aria-label="External link to twitter profile"><svg class="text-slate-800 dark:text-white hover:text-slate-700 dark:hover:text-slate-300 fill-current h-6 w-6" viewBox="0 0 24 24"><path d="M22.46 6c-.77.35-1.6.58-2.46.69C20.88 6.16 21.56 5.32 21.88 4.31 21.05 4.81 20.13 5.16 19.16 5.36 18.37 4.5 17.26 4 16 4c-2.35.0-4.27 1.92-4.27 4.29C11.73 8.63 11.77 8.96 11.84 9.27 8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15.0 1.49.75 2.81 1.91 3.56C3.62 10.5 2.96 10.3 2.38 10V10.03c0 2.08 1.48 3.82 3.44 4.21C5.46 14.34 5.08 14.39 4.69 14.39 4.42 14.39 4.15 14.36 3.89 14.31c.54 1.69 2.11 2.95 4 2.98-1.46 1.16-3.31 1.84-5.33 1.84C2.22 19.13 1.88 19.11 1.54 19.07 3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79 20.33 8.6 20.33 8.42 20.32 8.23 21.16 7.63 21.88 6.87 22.46 6z"/></svg></a></div><div class="mx-1 lg:ml-8"><button id=dark_mode_toggle aria-label="Switch for Dark mode and Light mode"><svg class="text-slate-800 dark:text-white hover:text-slate-700 dark:hover:text-slate-300 fill-current h-6 w-6" id="btn_dark" viewBox="0 0 24 24"><path d="M14 2c1.82.0 3.53.5 5 1.35C16.01 5.08 14 8.3 14 12s2.01 6.92 5 8.65C17.53 21.5 15.82 22 14 22 8.48 22 4 17.52 4 12S8.48 2 14 2z"/></svg><svg class="text-slate-800 dark:text-white hover:text-slate-700 dark:hover:text-slate-300 fill-current h-6 w-6 hidden" id="btn_light" viewBox="0 0 24 24"><path d="M12 7c-2.76.0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55.0 1-.45 1-1s-.45-1-1-1H2c-.55.0-1 .45-1 1s.45 1 1 1zm18 0h2c.55.0 1-.45 1-1s-.45-1-1-1h-2c-.55.0-1 .45-1 1S19.45 13 20 13zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1S11 19.45 11 20zM5.99 4.58c-.39-.39-1.03-.39-1.41.0-.39.39-.39 1.03.0 1.41l1.06 1.06c.39.39 1.03.39 1.41.0s.39-1.03.0-1.41L5.99 4.58zM18.36 16.95c-.39-.39-1.03-.39-1.41.0-.39.39-.39 1.03.0 1.41l1.06 1.06c.39.39 1.03.39 1.41.0.39-.39.39-1.03.0-1.41l-1.06-1.06zM19.42 5.99c.39-.39.39-1.03.0-1.41-.39-.39-1.03-.39-1.41.0l-1.06 1.06c-.39.39-.39 1.03.0 1.41s1.03.39 1.41.0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03.0-1.41-.39-.39-1.03-.39-1.41.0l-1.06 1.06c-.39.39-.39 1.03.0 1.41s1.03.39 1.41.0l1.06-1.06z"/></svg></button></div></div></nav><div id=content><main><header><div class="mt-6 md:mt-14 lg:mt-20"><div class="max-w-xl md:max-w-3xl xl:max-w-4xl mx-auto text-center px-6"><h1 class="text-3xl sm:text-5xl leading-tight font-sans font-bold mb-2 text-slate-800 dark:text-slate-100">Change Pagination in Odoo15</h1><p class="text-slate-700 dark:text-slate-200"><time datetime=2023-02-21 class="text-slate-900 dark:text-slate-100 text-xs mb-2 uppercase">Tuesday, 21 February 2023</time></p></div></div></header><article class="max-w-xl md:max-w-2xl xl:max-w-4xl mx-auto px-6 sm:px-12 pt-12"><div class="prose lg:prose-lg dark:prose-invert max-w-xl md:max-w-2xl xl:max-w-4xl"><p>Currently odoo eCommerce is already good to start somewhere. But sometimes, client want to change something that are not covered in odoo base. For example, they want to change the style of pagination, they want to change the numbering, or they want to completely changes the style and have an ellipsis with first and last page always shown. In this article, i will share how to achieve that behavior in Odoo15.</p><p>As for some styling, we can easily create new css or even directly change the style via Website Editor. But, to populate the pagination data, it&rsquo;s applied in the backend. So, we need to create a new module to override the default behavior.</p><h3 id=implementation>Implementation</h3><p>We can trace the code to find how Odoo implement pagination. As for eCommerce, it&rsquo;s first called from controller <code>def shop()</code> in module <code>website_sale</code>, then if we search the initialization of that method <code>def pager()</code>, we can see that it&rsquo;s initialized from portal controller. But, we found that there is a wrapper inside model <code>website</code> where it directly call the portal, so it&rsquo;s easier to just override the method <code>pager</code> in <code>website</code> model than override them from the controller, because as we see in the controller <code>def shop()</code>, it&rsquo;s just call the method <code>def pager()</code> from model <code>website</code>.</p><p>So now, we can create new module and inherit model <code>website</code> and override the method <code>pager()</code>.</p><p>Original method from module <code>website</code> on file <code>website/models/website.py</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>@api<span style=color:#ff79c6>.</span>model
</span></span><span style=display:flex><span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>pager</span>(self, url, total, page<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span>, step<span style=color:#ff79c6>=</span><span style=color:#bd93f9>30</span>, scope<span style=color:#ff79c6>=</span><span style=color:#bd93f9>5</span>, url_args<span style=color:#ff79c6>=</span><span style=color:#ff79c6>None</span>):
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>return</span> pager(url, total, page<span style=color:#ff79c6>=</span>page, step<span style=color:#ff79c6>=</span>step, scope<span style=color:#ff79c6>=</span>scope, url_args<span style=color:#ff79c6>=</span>url_args)
</span></span></code></pre></div><p>And now, we can override the method <code>pager()</code> in our new module</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>@api<span style=color:#ff79c6>.</span>model
</span></span><span style=display:flex><span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>pager</span>(self, url, total, page<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span>, step<span style=color:#ff79c6>=</span><span style=color:#bd93f9>30</span>, scope<span style=color:#ff79c6>=</span><span style=color:#bd93f9>5</span>, url_args<span style=color:#ff79c6>=</span><span style=color:#ff79c6>None</span>):
</span></span><span style=display:flex><span>    res <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>super</span>(Website, self)<span style=color:#ff79c6>.</span>pager(url, total, page<span style=color:#ff79c6>=</span>page, step<span style=color:#ff79c6>=</span>step, scope<span style=color:#ff79c6>=</span>scope, url_args<span style=color:#ff79c6>=</span>url_args)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>return</span> res
</span></span></code></pre></div><p>In the code above, we override the method <code>pager()</code>, and call the super method <code>super(Website, self).pager()</code> to get the original result. Then, we can modify the result as we want.</p><p>If you try to check the result of <code>res</code> variable, you will see that it&rsquo;s a dictionary with some keys. The most important keys are <code>page_count</code>, <code>page</code>, and <code>pages</code>. <code>page_count</code> is the total page, <code>page</code> is the current page, and <code>pages</code> is the list of page number that will be shown in the pagination.</p><p>Since we&rsquo;re going to change how pagination number will be shown, we just need to replace the <code>pages</code> key, but still need the total page and current page to compute where ellipsis should be shown. In the example below, it will show the first and last page, and if there is a gap atleast 3 page between the current page and the first or last page, it will show ellipsis instead of the number.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>@api<span style=color:#ff79c6>.</span>model
</span></span><span style=display:flex><span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>pager</span>(self, url, total, page<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span>, step<span style=color:#ff79c6>=</span><span style=color:#bd93f9>30</span>, scope<span style=color:#ff79c6>=</span><span style=color:#bd93f9>5</span>, url_args<span style=color:#ff79c6>=</span><span style=color:#ff79c6>None</span>):
</span></span><span style=display:flex><span>    res <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>super</span>(Website, self)<span style=color:#ff79c6>.</span>pager(url, total, page<span style=color:#ff79c6>=</span>page, step<span style=color:#ff79c6>=</span>step, scope<span style=color:#ff79c6>=</span>scope, url_args<span style=color:#ff79c6>=</span>url_args)
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>get_url</span>(page):
</span></span><span style=display:flex><span>        _url <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>%s</span><span style=color:#f1fa8c>/page/</span><span style=color:#f1fa8c>%s</span><span style=color:#f1fa8c>&#34;</span> <span style=color:#ff79c6>%</span> (url, page) <span style=color:#ff79c6>if</span> page <span style=color:#ff79c6>&gt;</span> <span style=color:#bd93f9>1</span> <span style=color:#ff79c6>else</span> url
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>if</span> url_args:
</span></span><span style=display:flex><span>            _url <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>%s</span><span style=color:#f1fa8c>?</span><span style=color:#f1fa8c>%s</span><span style=color:#f1fa8c>&#34;</span> <span style=color:#ff79c6>%</span> (_url, urls<span style=color:#ff79c6>.</span>url_encode(url_args))
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> _url
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>def</span> <span style=color:#50fa7b>get_pager</span>(pcurr, ptotal):
</span></span><span style=display:flex><span>        delta <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>2</span> <span style=color:#6272a4># number of pages to show before and after current page</span>
</span></span><span style=display:flex><span>        left <span style=color:#ff79c6>=</span> pcurr <span style=color:#ff79c6>-</span> delta
</span></span><span style=display:flex><span>        right <span style=color:#ff79c6>=</span> pcurr <span style=color:#ff79c6>+</span> delta <span style=color:#ff79c6>+</span> <span style=color:#bd93f9>1</span>
</span></span><span style=display:flex><span>        pages <span style=color:#ff79c6>=</span> []
</span></span><span style=display:flex><span>        pagesWithEllipsis <span style=color:#ff79c6>=</span> []
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>for</span> page <span style=color:#ff79c6>in</span> <span style=color:#8be9fd;font-style:italic>range</span>(<span style=color:#bd93f9>1</span>, ptotal<span style=color:#ff79c6>+</span><span style=color:#bd93f9>1</span>):
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>if</span> page <span style=color:#ff79c6>==</span> <span style=color:#bd93f9>1</span> <span style=color:#ff79c6>or</span> page <span style=color:#ff79c6>==</span> ptotal <span style=color:#ff79c6>or</span> (page <span style=color:#ff79c6>&gt;=</span> left <span style=color:#ff79c6>and</span> page <span style=color:#ff79c6>&lt;</span> right):
</span></span><span style=display:flex><span>                pages<span style=color:#ff79c6>.</span>append(page)
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        ellips <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>False</span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>for</span> page <span style=color:#ff79c6>in</span> pages:
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>if</span> ellips:
</span></span><span style=display:flex><span>                <span style=color:#ff79c6>if</span> page <span style=color:#ff79c6>-</span> ellips <span style=color:#ff79c6>==</span> <span style=color:#bd93f9>2</span>:
</span></span><span style=display:flex><span>                    pagesWithEllipsis<span style=color:#ff79c6>.</span>append({<span style=color:#f1fa8c>&#39;url&#39;</span>: get_url(ellips <span style=color:#ff79c6>+</span> <span style=color:#bd93f9>1</span>), <span style=color:#f1fa8c>&#39;num&#39;</span>: ellips <span style=color:#ff79c6>+</span> <span style=color:#bd93f9>1</span>})
</span></span><span style=display:flex><span>                <span style=color:#ff79c6>elif</span> page <span style=color:#ff79c6>-</span> ellips <span style=color:#ff79c6>!=</span> <span style=color:#bd93f9>1</span>:
</span></span><span style=display:flex><span>                    pagesWithEllipsis<span style=color:#ff79c6>.</span>append({<span style=color:#f1fa8c>&#39;url&#39;</span>: <span style=color:#ff79c6>None</span>, <span style=color:#f1fa8c>&#39;num&#39;</span>: <span style=color:#f1fa8c>&#39;...&#39;</span>})
</span></span><span style=display:flex><span>            pagesWithEllipsis<span style=color:#ff79c6>.</span>append({<span style=color:#f1fa8c>&#39;url&#39;</span>: get_url(page), <span style=color:#f1fa8c>&#39;num&#39;</span>: page})
</span></span><span style=display:flex><span>            ellips <span style=color:#ff79c6>=</span> page
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>return</span> pagesWithEllipsis
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    res[<span style=color:#f1fa8c>&#39;pages&#39;</span>] <span style=color:#ff79c6>=</span> get_pager(res[<span style=color:#f1fa8c>&#39;page&#39;</span>][<span style=color:#f1fa8c>&#39;num&#39;</span>], res[<span style=color:#f1fa8c>&#39;page_count&#39;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>return</span> res
</span></span></code></pre></div><p>And, here is the result</p><ol><li>First page<figure><a href=../change-pagination-in-odoo15/img/curr-page-1.png><img loading=lazy srcset="https://akhmad.id/change-pagination-in-odoo15/img/curr-page-1_hud7659c5850f2bd81bc22dc485aac8743_14235_320x0_resize_box_3.png 320w,
https://akhmad.id/change-pagination-in-odoo15/img/curr-page-1_hud7659c5850f2bd81bc22dc485aac8743_14235_600x0_resize_box_3.png 600w,
https://akhmad.id/change-pagination-in-odoo15/img/curr-page-1.png 1200w" src=../change-pagination-in-odoo15/img/curr-page-1_hud7659c5850f2bd81bc22dc485aac8743_14235_600x0_resize_box_3.png alt="current page is 1 (first page)"></a></figure></li><li>Middle page<figure><a href=../change-pagination-in-odoo15/img/curr-page-6.png><img loading=lazy srcset="https://akhmad.id/change-pagination-in-odoo15/img/curr-page-6_huf7a49dc9fd143e7a444d5ece35d4c3fb_16537_320x0_resize_box_3.png 320w,
https://akhmad.id/change-pagination-in-odoo15/img/curr-page-6_huf7a49dc9fd143e7a444d5ece35d4c3fb_16537_600x0_resize_box_3.png 600w,
https://akhmad.id/change-pagination-in-odoo15/img/curr-page-6.png 1200w" src=../change-pagination-in-odoo15/img/curr-page-6_huf7a49dc9fd143e7a444d5ece35d4c3fb_16537_600x0_resize_box_3.png alt="current page is 6 (middle page)"></a></figure></li><li>Almost last page<figure><a href=../change-pagination-in-odoo15/img/curr-page-952.png><img loading=lazy srcset="https://akhmad.id/change-pagination-in-odoo15/img/curr-page-952_hud7360ad969d27c792b839f93c0582025_19174_320x0_resize_box_3.png 320w,
https://akhmad.id/change-pagination-in-odoo15/img/curr-page-952_hud7360ad969d27c792b839f93c0582025_19174_600x0_resize_box_3.png 600w,
https://akhmad.id/change-pagination-in-odoo15/img/curr-page-952.png 1200w" src=../change-pagination-in-odoo15/img/curr-page-952_hud7360ad969d27c792b839f93c0582025_19174_600x0_resize_box_3.png alt="current page is 952 (almost last page)"></a></figure></li></ol><p>Okay, that&rsquo;s it. This article is just specific case where client want to change the pagination style, but you can always modify the code to fit your need.</p><blockquote><p>Module: <a href=https://github.com/rockavoldy/odoo-modules/tree/15.0/website_pagination>website_pagination</a></p></blockquote></div></article></main><br><br></div></div><div class="bottom-0 absolute w-full h-10 text-center"><footer class="text-slate-700 dark:text-slate-200 text-xs leading-normal flex flex-wrap justify-between mx-auto max-w-2xl px-4"><div class="w-full my-4"><p>Build with &#9829; in
<strong>Bandung</strong></p></div><div class="w-full sm:w-1/2"><nav><ul class="flex sm:justify-end -mx-2"></ul></nav></div></footer></div><script>const svgDark=document.getElementById("btn_dark"),svgLight=document.getElementById("btn_light"),btnDarkMode=document.getElementById("dark_mode_toggle");localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.documentElement.classList.add("dark"),svgDark.classList.add("hidden"),svgLight.classList.remove("hidden"),localStorage.theme="dark"):(document.documentElement.classList.remove("dark"),svgLight.classList.add("hidden"),svgDark.classList.remove("hidden"),localStorage.theme="light"),btnDarkMode.onclick=function(){localStorage.theme==="dark"?(document.documentElement.classList.remove("dark"),svgLight.classList.add("hidden"),svgDark.classList.remove("hidden"),localStorage.theme="light"):(document.documentElement.classList.add("dark"),svgDark.classList.add("hidden"),svgLight.classList.remove("hidden"),localStorage.theme="dark")}</script><script async src=https://umami.akhmad.id/script.js data-website-id=5818ae25-1b72-473c-a58e-4f35e78ce30f></script></div></body></html>