<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Step-by-step to create systemd service for your app. Systemd service can be used to control your Go app to run in the background, run the app on every boot, or auto-restart just to make sure it will always be running in-case of crash. "><link rel=canonical href=https://akhmad.id/blog/systemd-service-for-go-application/><title>Create Systemd service for Go application | Akhmad</title><link rel=stylesheet type=text/css href=https://akhmad.id/assets/css/tailwind.css><link rel=stylesheet type=text/css href="https://fonts.googleapis.com/css?family=Fira+Sans:400,700&display=swap"><link rel=stylesheet type=text/css href="https://fonts.googleapis.com/css?family=Fira+Code:400,700&display=swap"><link rel=icon type=image/ico href=https://akhmad.id/assets/favicon.ico><meta property="og:title" content="Create Systemd service for Go application"><meta property="og:description" content="Step-by-step to create systemd service for your app. Systemd service can be used to control your Go app to run in the background, run the app on every boot, or auto-restart just to make sure it will always be running in-case of crash."><meta property="og:type" content="article"><meta property="og:url" content="https://akhmad.id/blog/systemd-service-for-go-application/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-10-12T19:08:30+07:00"><meta property="article:modified_time" content="2023-10-12T19:08:30+07:00"><meta property="og:site_name" content="Akhmad Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Create Systemd service for Go application"><meta name=twitter:description content="Step-by-step to create systemd service for your app. Systemd service can be used to control your Go app to run in the background, run the app on every boot, or auto-restart just to make sure it will always be running in-case of crash."></head><body class="antialiased font-sans bg-white text-slate-900 dark:bg-slate-800 dark:text-white"><div class="relative min-h-screen"><div class=pb-10><nav id=nav__container class="mx-auto w-full px-4 md:px-6 py-2 md:py-3 flex flex-wrap items-center justify-between drop-shadow-xl bg-white dark:bg-slate-800"><div class="text-slate-800 dark:text-white mr-6 w-fit"><div class="flex flex-col"><a href=https://akhmad.id/ class="font-semibold text-xl hover:text-slate-700 dark:hover:text-slate-300">Akhmad</a>
<span class="text-xs sm:text-sm">Stories, Build logs, Ideas</span></div></div><div class="flex flex-row"><div class="flex flex-row self-start"><div class="mr-2 md:ml-2"><a class="font-semibold uppercase hover:text-slate-600 dark:hover:text-slate-300" href=../../now/ aria-label=Now>Now</a></div><div class=mx-2><a class="font-semibold uppercase hover:text-slate-600 dark:hover:text-slate-300" href=../../blog/ aria-label="Blog posts">Blog</a></div></div><div class="mx-3 lg:ml-8 self-end"><button id=dark_mode_toggle aria-label="Switch for Dark mode and Light mode"><svg class="text-slate-800 dark:text-white hover:text-slate-700 dark:hover:text-slate-300 fill-current h-6 w-6" id="btn_dark" viewBox="0 0 24 24"><path d="M14 2c1.82.0 3.53.5 5 1.35C16.01 5.08 14 8.3 14 12s2.01 6.92 5 8.65C17.53 21.5 15.82 22 14 22 8.48 22 4 17.52 4 12S8.48 2 14 2z"/></svg><svg class="text-slate-800 dark:text-white hover:text-slate-700 dark:hover:text-slate-300 fill-current h-6 w-6 hidden" id="btn_light" viewBox="0 0 24 24"><path d="M12 7c-2.76.0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55.0 1-.45 1-1s-.45-1-1-1H2c-.55.0-1 .45-1 1s.45 1 1 1zm18 0h2c.55.0 1-.45 1-1s-.45-1-1-1h-2c-.55.0-1 .45-1 1S19.45 13 20 13zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1S11 19.45 11 20zM5.99 4.58c-.39-.39-1.03-.39-1.41.0-.39.39-.39 1.03.0 1.41l1.06 1.06c.39.39 1.03.39 1.41.0s.39-1.03.0-1.41L5.99 4.58zM18.36 16.95c-.39-.39-1.03-.39-1.41.0-.39.39-.39 1.03.0 1.41l1.06 1.06c.39.39 1.03.39 1.41.0.39-.39.39-1.03.0-1.41l-1.06-1.06zM19.42 5.99c.39-.39.39-1.03.0-1.41-.39-.39-1.03-.39-1.41.0l-1.06 1.06c-.39.39-.39 1.03.0 1.41s1.03.39 1.41.0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03.0-1.41-.39-.39-1.03-.39-1.41.0l-1.06 1.06c-.39.39-.39 1.03.0 1.41s1.03.39 1.41.0l1.06-1.06z"/></svg></button></div></div></nav><main><header><div class="mt-6 md:mt-14 lg:mt-20"><div class="max-w-xl md:max-w-3xl xl:max-w-4xl mx-auto text-center px-6"><h1 class="text-3xl sm:text-5xl leading-tight font-sans font-bold mb-2 text-slate-800 dark:text-slate-100">Create Systemd service for Go application</h1><p class="text-slate-700 dark:text-slate-200"><time datetime=2023-10-12 class="text-slate-900 dark:text-slate-100 text-xs mb-2 uppercase">Thursday, 12 October 2023</time></p></div></div></header><article class="max-w-xl md:max-w-2xl xl:max-w-4xl mx-auto px-6 sm:px-12 pt-12"><div class="prose lg:prose-lg dark:prose-invert max-w-xl md:max-w-2xl xl:max-w-4xl"><ol><li><p>Create new file with <code>.service</code> extension inside directory <code>/lib/systemd/system/</code>. In this case, i will create with the name <code>pajak.service</code></p></li><li><p>Here is a simple structure to create service, fill the file we have created above with this and adapt with your app.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#ff79c6>[</span>Unit<span style=color:#ff79c6>]</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>Description</span><span style=color:#ff79c6>=</span>Kurs Pajak
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>Service<span style=color:#ff79c6>]</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>Group</span><span style=color:#ff79c6>=</span>akhmad
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>Type</span><span style=color:#ff79c6>=</span>simple
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>Restart</span><span style=color:#ff79c6>=</span>always
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>RestartSec</span><span style=color:#ff79c6>=</span>5s
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>WorkingDirectory</span><span style=color:#ff79c6>=</span>/home/akhmad/pajak/
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>ExecStart</span><span style=color:#ff79c6>=</span>env <span style=color:#8be9fd;font-style:italic>HTTP_PORT</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;:8080&#34;</span> /home/akhmad/pajak/pajak
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>PermissionsStartOnly</span><span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>true</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>StandardOutput</span><span style=color:#ff79c6>=</span>syslog
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>StandardError</span><span style=color:#ff79c6>=</span>syslog
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>SyslogIdentifier</span><span style=color:#ff79c6>=</span>sleepservice
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>Install<span style=color:#ff79c6>]</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>WantedBy</span><span style=color:#ff79c6>=</span>multi-user.target
</span></span></code></pre></div><p>From above service configuration, my app binary is inside <code>/home/akhmad/pajak/</code> directory that have the name <code>pajak</code>.</p><p>Config you need to give attention is <code>ExecStart</code>, and <code>WorkingDirectory</code></p><ul><li><code>ExecStart</code> should be point to the executable binary, just like how you usually run the app directly. In my example above, i have <code>env HTTP_PORT=":8080"</code> that will be passed to the app as HTTP Port to access the app.</li><li><code>WorkingDirectory</code> here will be relative path for the app. It&rsquo;s not depends to the binary file you have, so you can change it anywhere you want. I have set this inside <code>/home/akhmad/pajak/</code> to store a file created from the app, and to read the file from the app.</li></ul><p>Also, any output or error from the app will be saved to syslog, you can check it with command</p><p><code>sudo systemctl status pajak.service</code></p><figure><a href=../../blog/systemd-service-for-go-application/img/example-systemctl-status.png><img loading=lazy srcset="https://akhmad.id/blog/systemd-service-for-go-application/img/example-systemctl-status_huc67df503376e8fe9b79834c3555393a3_60250_320x0_resize_box_3.png 320w,
https://akhmad.id/blog/systemd-service-for-go-application/img/example-systemctl-status_huc67df503376e8fe9b79834c3555393a3_60250_600x0_resize_box_3.png 600w,
https://akhmad.id/blog/systemd-service-for-go-application/img/example-systemctl-status.png 1200w" src=../../blog/systemd-service-for-go-application/img/example-systemctl-status_huc67df503376e8fe9b79834c3555393a3_60250_600x0_resize_box_3.png alt></a></figure><p>As for another configuration, you can always check the <a href=https://www.freedesktop.org/software/systemd/man/systemd.service.html>man-page of systemd service here</a>.</p></li><li><p>After the service is ready, and have been configured, you can start the service with command</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sudo systemctl start &lt;file_name.service&gt;
</span></span></code></pre></div><p>in this case, will be <code>sudo systemctl start pajak.service</code></p></li><li><p>If there is an error says can&rsquo;t find the service, it seems you need to reload the daemon first</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sudo systemctl daemon-reload
</span></span></code></pre></div></li><li><p>As to make sure the service will be running at booting, make sure to run this command</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sudo systemctl <span style=color:#8be9fd;font-style:italic>enable</span> pajak.service
</span></span></code></pre></div></li></ol></div></article></main><br><br></div><div class="bottom-0 absolute w-full h-10 text-center"><footer class="text-slate-700 dark:text-slate-200 text-xs leading-normal flex flex-wrap justify-between mx-auto max-w-2xl px-4"><div class="w-full my-4"><p>Build with &#9829; in
<strong>Bandung</strong></p></div><div class="w-full sm:w-1/2"><nav><ul class="flex sm:justify-end -mx-2"></ul></nav></div></footer></div></div><script>const svgDark=document.getElementById("btn_dark"),svgLight=document.getElementById("btn_light"),btnDarkMode=document.getElementById("dark_mode_toggle");localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.documentElement.classList.add("dark"),svgDark.classList.add("hidden"),svgLight.classList.remove("hidden"),localStorage.theme="dark"):(document.documentElement.classList.remove("dark"),svgLight.classList.add("hidden"),svgDark.classList.remove("hidden"),localStorage.theme="light"),btnDarkMode.onclick=function(){localStorage.theme==="dark"?(document.documentElement.classList.remove("dark"),svgLight.classList.add("hidden"),svgDark.classList.remove("hidden"),localStorage.theme="light"):(document.documentElement.classList.add("dark"),svgDark.classList.add("hidden"),svgLight.classList.remove("hidden"),localStorage.theme="dark")}</script><script async src=https://umami.akhmad.id/script.js data-website-id=5818ae25-1b72-473c-a58e-4f35e78ce30f></script></body></html>